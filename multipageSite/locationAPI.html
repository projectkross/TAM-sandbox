<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Location API</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500;600&family=Roboto&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">


    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Cascading dropdowns -->
    <script language="javascript" type="text/javascript">
        function dynamicdropdown(listindex) {
            switch (listindex) {
                case "search":
                    document.getElementById("action").options[0] = new Option("--", "");
                    document.getElementById("action").options[1] = new Option("AllowOnlyKeys", "AllowOnlyKeys");
                    document.getElementById("action").options[2] = new Option("ExcludeKeys", "ExcludeKeys");
                    document.getElementById("action").options[3] = new Option("AddTo", "AddTo");
                    document.getElementById("action").options[4] = new Option("Replace", "Replace");
                    document.getElementById("action").options[5] = new Option("Clear", "Clear");
                    document.getElementById("disappearingLine").style.opacity = .50;
                    document.getElementById("selectionCombo").innerText = "search action descriptions";
                    document.getElementById("dataLabel").innerText = "data example: queryParam=ohHai";
                    document.getElementById("helperText").innerHTML = "<ul><li>AllowOnlyKeys - Remove all query strings EXCEPT the ones noted. data provides an array of key names to allow.</li><li>ExcludeKeys - Remove certain query string parameters. data provides an array of key names to exclude.</li><li>AddTo - Add a new query param. data can either provide an array of key names or an object of key/value pairs to add.</li><li>Replace - Remove the current querystring and replaces it with whatever is provided.</li><li>Clear - Remove the current querystring.</li></ul>";
                    break;
                case "hash":
                    document.getElementById("action").options[0] = new Option("--", "");
                    document.getElementById("action").options[1] = new Option("Replace", "Replace");
                    document.getElementById("action").options[2] = new Option("Clear", "Clear");
                    document.getElementById("disappearingLine").style.opacity = .50;
                    document.getElementById("selectionCombo").innerText = "hash action descriptions";
                    document.getElementById("dataLabel").innerText = "gotta figure out how to make this work better";
                    document.getElementById("helperText").innerHTML = "<ul><li>Replace - This replaces the current hash value with what is provided.</li><li>Clear - This removes the current hash.</ul>";
                    break;
                case "pathname":
                    document.getElementById("action").options[0] = new Option("--", "");
                    document.getElementById("action").options[1] = new Option("Replace", "Replace");
                    document.getElementById("disappearingLine").style.opacity = .50;
                    document.getElementById("dataLabel").innerText = "data example: cats/are/the/best";
                    document.getElementById("selectionCombo").innerText = "pathname action descriptions";
                    document.getElementById("helperText").innerText = "This replaces the current pathname with what is provided. Hostname is unchanged.";
                    break;
                case "hostname":
                    document.getElementById("action").options[0] = new Option("--", "");
                    document.getElementById("action").options[1] = new Option("Replace", "Replace");
                    document.getElementById("dataLabel").innerText = "data example: myNewDomain.com";
                    document.getElementById("selectionCombo").innerText = "hostname action descriptions";
                    document.getElementById("helperText").innerText = "This replaces the current hostname.  The rest of the path is unchanged.";
                    break;
                case "href":
                    document.getElementById("action").options[0] = new Option("--", "");
                    document.getElementById("action").options[1] = new Option("Replace", "Replace");
                    document.getElementById("disappearingLine").style.opacity = .50;
                    document.getElementById("dataLabel").innerText = "data example: https://someNewSite.com/ohHai.html";
                    document.getElementById("selectionCombo").innerText = "href action descriptions";
                    document.getElementById("helperText").innerText = "This replaces the current HREF with what is provided.";
                    break;
                case "protocol":
                    document.getElementById("action").options[0] = new Option("--", "");
                    document.getElementById("action").options[1] = new Option("ForceSecure", "ForceSecure");
                    document.getElementById("dataLabel").innerText = "no data provided for protocol attr";
                    document.getElementById("disappearingLine").style.opacity = .50;
                    document.getElementById("data").disabled = true;
                    document.getElementById("selectionCombo").innerText = "protocol action descriptions";
                    document.getElementById("helperText").innerText = "This forces the protocol to https. No data field is provided with this action.";
                    break;
            }
            return true;
        }
    </script>

    <!-- PENDO SNIPPET LIVES HERE -->
    <script>
        (function (apiKey) {
            (function (p, e, n, d, o) {
                var v, w, x, y, z; o = p[d] = p[d] || {}; o._q = o._q || [];
                v = ['initialize', 'identify', 'updateOptions', 'pageLoad', 'track']; for (w = 0, x = v.length; w < x; ++w)(function (m) {
                    o[m] = o[m] || function () { o._q[m === v[0] ? 'unshift' : 'push']([m].concat([].slice.call(arguments, 0))); };
                })(v[w]);
                y = e.createElement(n); y.async = !0; y.src = 'https://cdn.pendo.io/agent/static/' + apiKey + '/pendo.js';
                z = e.getElementsByTagName(n)[0]; z.parentNode.insertBefore(y, z);
            })(window, document, 'script', 'pendo');

            pendo.initialize({
                visitor: {
                    id: localStorage.getItem('visitor')
                },
                account: {
                    id: localStorage.getItem('account')
                }
            });
        })('1a320afd-6992-47f3-4486-571abccd1b9c');
    </script>
</head>


<body>

    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
    <!-- Spinner End -->

    <!-- Navbar Start -->
    <div class="container-fluid position-relative p-0">
        <nav class="navbar navbar-expand-lg navbar-light px-4 px-lg-5 py-3 py-lg-0">
            <a href="" class="navbar-brand p-0">
                <img src="../singlePageApp/assets/img/dumpster-fire.gif">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto py-0">
                    <a href="../index.html" class="nav-item nav-link">Portal</a>
                    <a href="frames.html" class="nav-item nav-link">Frames</a>
                    <a href="locationAPI.html" class="nav-item nav-link active">Location API</a>
                    <a href="csp.html" class="nav-item nav-link">CSP</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Special Installs</a>
                        <div class="dropdown-menu m-0">
                            <a href="jwt.html" class="dropdown-item">JWT</a>
                            <a href="selfHosted.html" class="dropdown-item">selfHosted</a>
                        </div>
                    </div>
                    <a href="contact.html" class="nav-item nav-link">Contact</a>
                </div>
                <a href="index.html#login" class="btn btn-primary rounded-pill py-2 px-4 ms-lg-4">
                    <div id="visitorIdHeader"></div>
                    <div id="visitorInstructions"></div>
                </a>
                <script type="text/javascript">
                    setInterval(function () {
                        let currentVisitor = localStorage.getItem('visitor');
                        if (currentVisitor = "" || currentVisitor == null) {
                            document.getElementById("visitorInstructions").innerText = "Please log in below"
                        } else {
                            document.getElementById("visitorIdHeader").innerText = localStorage.getItem('visitor');
                            document.getElementById("visitorInstructions").innerText = "Click to change visitor"
                            document.getElementById("visitorInstructions").style.fontSize = "x-small";
                        };
                    },
                        1000);
                </script>
            </div>
        </nav>
    </div>
    <!-- Navbar End -->

    <!-- Header Start -->
    <div class="container-fluid bg-breadcrumb">
        <div class="container text-center py-5"
            style="max-width: 900px; padding-bottom: 10px !important; padding-top: 10px !important">
            <h1 class="text-white display-3 mb-4">Location API</h1>
        </div>
        <div class="mx-auto text-center" style="max-width: 900px;">
            <p class="text-white mb-4">Location API is used to manipulate the URL being sent back to Pendo. This page
                allows you to test its various configurations.
            </p>
            <p class="text-white mb-4">Use the button below to display the current URL
                being sent to Pendo. It is also helpful to open the dev tools and use
                pendo.enableLogging() in the console to see what's happening behind-the-scenes.
            </p>
        </div>
    </div>
    <div class="container-fluid bg-breadcrumb"
        style="position:sticky;top:60px;z-index: 1;padding-top:20px; padding-bottom:20px">
        <div class="mx-auto text-center">
            <a class="btn btn-light text-primary rounded-pill py-3 px-5 mt-2" onclick="getURL()">Where am I?</a>
            <script type="text/javascript">
                function getURL() {
                    document.getElementById("displayUrl").innerHTML = pendo.getNormalizedUrl()
                }
            </script>
            <h4 class="text-white mb-4" id="displayUrl" style="padding-top: 10px;"></h4>
        </div>
    </div>
    <!-- Header End -->

    <!-- Location API Start -->
    <!-- THIS IS WHERE PENDO FUNCTIONS LIVE -->
    <div class="container-fluid booking py-5 locationAPI">
        <div class="container py-5">
            <!-- addTransforms start -->
            <div class="row g-5 align-items-center addTransforms">
                <div class="col-lg-6">
                    <h1 class="text-white mb-4">addTransforms</h1>
                    <p class="text-white mb-4">The addTransforms() function allows you to change all or part of a
                        URL.<br>It takes three inputs:
                    <pre><code style="color:white;">
{
    'attr': 'what part of the url do you want to change',
    'action': 'in what way do you want to change it',
    'data': 'what value do you want to use'
}
                                </code></pre>
                    </p>
                    <p class="text-white mb-4">Multiple changes can be invoked in a single addTransforms by using a list
                        of objects:
                    <pre><code style="color:white;">
pendo.location.addTransforms([
    {
        'attr': 'pathname',
        'action': 'Replace',
        'data': 'cats/are/the/best'
    },
    {
        'attr': 'search',
        'action': 'ExcludeKeys',
        'data': ['email', 'someOtherPII']; 
    }
]);
        </code></pre>
                    </p>
                </div>
                <div class="col-lg-6">
                    <h1 class="text-white mb-3">Test it!</h1>
                    <div>
                        <div class="row g-3">
                            <div class="col-12">
                                <div class="form-floating">
                                    <select class="form-select bg-white border-0" id="attr" name="attr"
                                        onchange="javascript: dynamicdropdown(this.options[this.selectedIndex].value);">
                                        <option value="">Select attr</option>
                                        <option value="search">search</option>
                                        <option value="hash">hash</option>
                                        <option value="pathname">pathname</option>
                                        <option value="hostname">hostname</option>
                                        <option value="href">href</option>
                                        <option value="protocol">protocol</option>
                                    </select>
                                    <label for="SelectPerson">attr</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating">
                                    <script type="text/javascript" language="JavaScript">
                                        document.write('<select name="action" class="form-select bg-white border-0" id="action"><option value="">Choose attr first</option></select>')
                                    </script>
                                    <noscript>
                                        <select class="form-select bg-white border-0" id="action" name="action">
                                        </select>
                                    </noscript>
                                    <label for="CategoriesSelect">action</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating">
                                    <textarea class="form-control bg-white border-0" id="data"
                                        style="height: 65px"></textarea>
                                    <label for="data" id="dataLabel">data</label>
                                </div>
                            </div>
                            <div>
                                <button onclick="updateUrl2()" class="btn btn-primary text-white w-100 py-3"
                                    id="addTransformsButton">Update</button>
                                <script type="text/javascript">
                                    function updateUrl2() {
                                        var $items = $('#attr, #action,#data')
                                        var obj = {}
                                        $items.each(function () {
                                            obj[this.id] = $(this).val();
                                        })
                                        // change the URL
                                        pendo.location.addTransforms([obj]);

                                        // show on screen
                                        setTimeout(() => {
                                            var json = JSON.stringify(obj);
                                            var transformedUrl = pendo.getNormalizedUrl();

                                            document.getElementById("selectionCombo").innerText = "Your code & new URL: ";
                                            $('#helperText').replaceWith('<div id="transformResult"><pre><code style="color:white;">' + JSON.stringify(obj, null, ' '));
                                            $('#transformResult').append('<h5><code style="color:white;">' + transformedUrl)
                                        }, 1000);

                                        $('#addTransformsButton').replaceWith('<a class="btn btn-primary text-white w-100 py-3" onClick="window.location.reload()">Clear choices for new test</a>');

                                    }
                                </script>
                            </div>
                            <div class="col-12">
                                <hr id="disappearingLine" style="color:white; height: 2px; opacity: 0;">
                                <h4 class="text-white pe-3" id="selectionCombo"></h4>
                                <p class="text-white mb-4" id="helperText"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div><br>
                <hr style="color:white; height: 2px; opacity: .50;">
            </div>
            <!-- addTransforms end -->


            <!-- clearTransforms start -->
            <div class="row g-5 align-items-center clearTransforms">
                <div class="col-lg-6">
                    <h1 class="text-white mb-4">clearTransforms</h1>
                    <p class="text-white mb-4">Use clearTransforms to undo any existing changes. Nothing is passed into
                        the function.</p>
                </div>
                <div class="col-lg-6">
                    <h1 class="text-white" style="margin-bottom: 0;">Test it!</h1><i class="text-white">hint: do an
                        addTransforms first</i>
                    <button onclick="clearTransforms()" class="btn btn-primary text-white w-100 py-3"
                        id="clearTransforms">Update</button>
                    <script type="text/javascript">
                        function clearTransforms() {
                            pendo.location.clearTransforms();
                            console.log("transforms cleared. URL is now: " + pendo.location.getHref());
                        }
                    </script>

                </div>
            </div>
            <div><br>
                <hr style="color:white; height: 2px; opacity: .50;">
            </div>
            <!-- clearTransforms end -->


            <!--  start -->
            <div class="row g-5 align-items-center setUrl">
                <div class="col-lg-6">
                    <h1 class="text-white mb-4">setUrl</h1>
                    <p class="text-white mb-4">Use setUrl() to completely replace the browser's url.When using this,
                        <span class="text-warning">you must include the full URL</span>, i.e.
                        https://www.geocities.com/underConstruction
                    <p class="text-white mb-4"></p>
                    <p class="text-white mb-4">This can be added to the snippet or tied to a particular action on the
                        page. For this example, it is tied to the click of the Update button.</p>
                </div>
                <div class="col-lg-6">
                    <h1 class="text-white mb-3">Test it!</h1>
                    <div>
                        <div class="row g-3">
                            <div class="col-12">
                                <div class="form-floating">
                                    <textarea class="form-control bg-white border-0" placeholder="Special Request"
                                        id="setUrlTo"></textarea>
                                    <label for="setUrlTo">Enter a whoooole new URL. Don't forget the https://</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <button onclick="updateUrl()" class="btn btn-primary text-white w-100 py-3"
                                    id="updateUrlButton">Update</button>
                                <script type="text/javascript">
                                    function updateUrl() {
                                        var urlVal = document.getElementById("setUrlTo").value;
                                        pendo.location.setUrl(urlVal);
                                        console.log("URL has been updated to " + pendo.location.getHref());
                                    }
                                </script>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div><br>
                <hr style="color:white; height: 2px; opacity: .50;">
            </div>
            <!-- setUrl end -->


            <!--  start -->
            <div class="row g-5 align-items-center useBrowserUrl">
                <div class="col-lg-6">
                    <h1 class="text-white mb-4">useBrowserUrl</h1>
                    <p class="text-white mb-4">Use useBrowserUrl to undo setUrl and default back to the browser URL. Nothing is passed into
                        the function.</p>
                </div>
                <div class="col-lg-6">
                    <h1 class="text-white" style="margin-bottom: 0;">Test it!</h1><i class="text-white">hint: do setUrl first</i>
                    <button onclick="useBrowserUrl()" class="btn btn-primary text-white w-100 py-3"
                        id="useBrowserUrl">Update</button>
                    <script type="text/javascript">
                        function useBrowserUrl() {
                            pendo.location.useBrowserUrl();
                            console.log("URL reset to " + pendo.location.getHref());
                        }
                    </script>

                </div>
            </div>
            <div><br>
                <hr style="color:white; height: 2px; opacity: .50;">
            </div>
            <!-- useBrowserUrl end -->


        </div>
    </div>
    <!-- Tour Booking End -->

    <!-- Documentation Link Start -->
    <div class="container-fluid subscribe py-5">
        <div class="container text-center py-5">
            <div class="mx-auto text-center" style="max-width: 900px;">
                <h5 class="subscribe-title px-3">Documentation</h5>
                <div class="position-relative mx-auto">
                    <a href="https://agent.pendo.io/advanced/location"
                        class="btn btn-light text-primary rounded-pill py-3 px-5 mt-2">Go to Agent Docs</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Documentation Link End -->

    <!-- Copyright Start -->
    <div class="container-fluid copyright text-body py-4">
        <div class="container">
            <div class="row g-4 align-items-center">
                <div class="col-lg-12 text-center=">
                    <img src="img/eeIcon.png" style="max-width: 75px;">Brought to you by Escalation Engineering. Site template designed By <a href="https://htmlcodex.com">HTML Codex</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Copyright End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-primary btn-primary-outline-0 btn-md-square back-to-top"><i
            class="fa fa-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>


    <!-- Template Javascript -->
    <script src="js/main.js"></script>
</body>

</html>